# TODOをまとめる

## 基本構成としてやりたいこと

- ビジネスロジックとロギングの分離
    - 開始終了ログはBeforeAfterでいいじゃん
- ロギングでのリクエストパラメータについて、生のリクエストパラメータを出力する(セキュリティ的に問題があるものはマスクする)



## 使ってみたい便利ライブラリを入れる

- Jilt: Builderに必須の値とそうでない値を定義して使い間違いを防ぎたい
- Logbook JavaのクラスのtoStringをログに出すのは見づらいので、変えたい。文章の改行コードなんかもネック。
- NullAway とにかく実装にnullの制約をつけたい。ヌルぽ防止のために仲良くなりたい。
- TestContainers ローカルにMySQLを入れなくてもテストがしたい。

## クライアントサイドJavaScriptのテスト環境と共存

Jestを使いたい。が、Node.jsと共存しないといけない。
Javaとは別にNode.js入れたくないから何とかならんかなと。

## 外部APIに依存したシステムである場合の実行環境作り

Mockoon？ほかにある？
Apidogが気になる。無料プランでいいからやりたい。

## 様々なテスト方法を取り入れる

JUnit、Jest、Playwright…

単体試験と、スタブ、ドライバを使った結合試験の環境を作りたいかな。

## バージョン管理をする

面倒でもGitのリポジトリを作る。
やる。

## とりあえず開発環境

何はなくともDBだ！H2かな。
H2とMySQLの共存を目指す。DDLどうしようかな。

## なんの業務を模したシステムにするのか

印刷にしよう

- 業務内容
    - 仕様入力
    - 作業手配実行
    - 作業手配状況参照
    - 作業手配内容修正
    - 作業手配取り下げ
- バックエンドAPI
    - 案件申し込み依頼API
    - 用紙手配申込API(新規・修正・取り下げ)
    - 印刷手配申込API
    - 加工手配申込API
    - 納品手配申込-案件登録API
    - 手配申込削除API
    - 手配申込情報取得API
    - 納品情報ファイル送信API
    - 納品情報ファイル削除API
    - 再依頼要否情報取得API(調整中,受理済,要再依頼)
- エンティティ
    - 手配内容
        - 手配NO
        - 顧客ID(任意)
        - 顧客名(新規)
        - 製品名
        - 納品日
        - 入稿予定日
        - 仕様
            - 用紙(リスト)
                - 内容
                    - 納品希望日
                    - 種類
                    - 数量(包,枚)
                    - 対象作業ID(複数可能)
                    - 依頼先
                    - 納品先
                    - 特記事項
            - 印刷(リスト)
                - 内容
                    - 作業ID
                    - 開始予定日
                    - 終了予定日
                    - 種類
                    - CMYK使用有無
                    - ニス種類(リスト)
                    - 特色種類(リスト)
                    - 依頼先
                    - 特記事項
            - 加工(リスト)
                - 内容
                    - 作業ID
                    - 開始予定日
                    - 終了予定日
                    - 種類(PP、抜き、製本、断裁、そのほか)
                    - CMYK使用有無
                    - 特色種類(リスト)
                    - 依頼先
                    - 特記事項
            - 納品(リスト)
                - 内容
                    - 作業ID
                    - 開始予定日
                    - 終了予定日
                    - 依頼先
                    - 納品リスト有無
                    - 納品先
    - 手配情報
        - 手配受付番号
        - 手配枝番号
        - 再依頼要否
        - 再依頼事項
        - (以下は手配内容)と同値
    - 顧客マスタ(APIかなあ)※取引先管理システムがあるという体で
    - 外部依頼先マスタ(APIかなあ)※取引先管理システムがあるという体で
- 機能一覧
    - 画面
        - 案件情報入力(伝票ファイル取り込みもできたらいいんだけどね)
        - 案件依頼実行
        - 案件依頼状況参照
        - 案件情報編集
    - バッチ
        - 再依頼要否情報取得機能
